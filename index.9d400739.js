import{j as e,r as t,e as o,z as n,A as a,w as i,B as l,a as s,n as r,y as c,C as u,c as v,D as d,g as p,E as f,d as h,b as m,G as g,H as w,I as y,T as b,J as x,K as C,L as z,F as S,M as $,N as I}from"./index.6b805e11.js";function P(){}const O=Object.assign,k="undefined"!=typeof window;function A(e,t){const o=t.split(".");let n=e;return o.forEach((e=>{var t;n=null!=(t=n[e])?t:""})),n}const B=[Number,String],L={type:Boolean,default:!0},E=e=>({type:e,required:!0}),T=e=>({type:B,default:e}),Y=e=>({type:String,default:e});var X="undefined"!=typeof window;function R(e){return X?requestAnimationFrame(e):-1}function j(e){R((()=>R(e)))}var H,Z,D=(e,t)=>({top:0,left:0,right:e,bottom:t,width:e,height:t}),M=t=>{const o=e(t);if(o===window){const e=o.innerWidth,t=o.innerHeight;return D(e,t)}return(null==o?void 0:o.getBoundingClientRect)?o.getBoundingClientRect():D(0,0)};function N(e,t,o){const n=function(e){const t=[],o=e=>{Array.isArray(e)&&e.forEach((e=>{var n;f(e)&&(t.push(e),(null==(n=e.component)?void 0:n.subTree)&&(t.push(e.component.subTree),o(e.component.subTree.children)),e.children&&o(e.children))}))};return o(e),t}(e.subTree.children);o.sort(((e,t)=>n.indexOf(e.vnode)-n.indexOf(t.vnode)));const a=o.map((e=>e.proxy));t.sort(((e,t)=>a.indexOf(e)-a.indexOf(t)))}function W(e){let t;s((()=>{e(),r((()=>{t=!0}))})),c((()=>{t&&e()}))}function F(t,l,s={}){if(!X)return;const{target:r=window,passive:c=!1,capture:u=!1}=s;let v;const d=o=>{const n=e(o);n&&!v&&(n.addEventListener(t,l,{capture:u,passive:c}),v=!0)},p=o=>{const n=e(o);n&&v&&(n.removeEventListener(t,l,u),v=!1)};o((()=>p(r))),n((()=>p(r))),W((()=>d(r))),a(r)&&i(r,((e,t)=>{p(t),d(e)}))}var V,q=/scroll|auto|overlay/i,U=X?window:void 0;function K(e){return"HTML"!==e.tagName&&"BODY"!==e.tagName&&1===e.nodeType}const _=e=>null!=e,G=e=>"function"==typeof e,J=e=>null!==e&&"object"==typeof e,Q=e=>"number"==typeof e||/^\d+(\.\d+)?$/.test(e);k&&/ios|iphone|ipad|ipod/.test(navigator.userAgent.toLowerCase());function ee(e,t){("boolean"!=typeof e.cancelable||e.cancelable)&&e.preventDefault(),t&&(e=>{e.stopPropagation()})(e)}function te(t){const o=e(t);if(!o)return!1;const n=window.getComputedStyle(o),a="none"===n.display,i=null===o.offsetParent&&"fixed"!==n.position;return a||i}const{width:oe,height:ne}=function(){if(!H&&(H=t(0),Z=t(0),X)){const e=()=>{H.value=window.innerWidth,Z.value=window.innerHeight};e(),window.addEventListener("resize",e,{passive:!0}),window.addEventListener("orientationchange",e,{passive:!0})}return{width:H,height:Z}}();function ae(e){if(_(e))return Q(e)?`${e}px`:String(e)}const ie=/-(\w)/g,le=e=>e.replace(ie,((e,t)=>t.toUpperCase())),se=(e,t,o)=>Math.min(Math.max(e,t),o),{hasOwnProperty:re}=Object.prototype;function ce(e,t){return Object.keys(t).forEach((o=>{!function(e,t,o){const n=t[o];_(n)&&(re.call(e,o)&&J(n)?e[o]=ce(Object(e[o]),n):e[o]=n)}(e,t,o)})),e}const ue=t("zh-CN"),ve=l({"zh-CN":{name:"姓名",tel:"电话",save:"保存",confirm:"确认",cancel:"取消",delete:"删除",loading:"加载中...",noCoupon:"暂无优惠券",nameEmpty:"请填写姓名",addContact:"添加联系人",telInvalid:"请填写正确的电话",vanCalendar:{end:"结束",start:"开始",title:"日期选择",weekdays:["日","一","二","三","四","五","六"],monthTitle:(e,t)=>`${e}年${t}月`,rangePrompt:e=>`最多选择 ${e} 天`},vanCascader:{select:"请选择"},vanPagination:{prev:"上一页",next:"下一页"},vanPullRefresh:{pulling:"下拉即可刷新...",loosing:"释放即可刷新..."},vanSubmitBar:{label:"合计:"},vanCoupon:{unlimited:"无门槛",discount:e=>`${e}折`,condition:e=>`满${e}元可用`},vanCouponCell:{title:"优惠券",count:e=>`${e}张可用`},vanCouponList:{exchange:"兑换",close:"不使用",enable:"可用",disabled:"不可用",placeholder:"输入优惠码"},vanAddressEdit:{area:"地区",postal:"邮政编码",areaEmpty:"请选择地区",addressEmpty:"请填写详细地址",postalEmpty:"邮政编码不正确",addressDetail:"详细地址",defaultAddress:"设为默认收货地址"},vanAddressList:{add:"新增地址"}}});var de={messages:()=>ve[ue.value],use(e,t){ue.value=e,this.add({[e]:t})},add(e={}){ce(ve,e)}};function pe(e){const t=le(e)+".";return(e,...o)=>{const n=de.messages(),a=A(n,t+e)||A(n,e);return G(a)?a(...o):a}}function fe(e,t){return t?"string"==typeof t?` ${e}--${t}`:Array.isArray(t)?t.reduce(((t,o)=>t+fe(e,o)),""):Object.keys(t).reduce(((o,n)=>o+(t[n]?fe(e,n):"")),""):""}function he(e){return(t,o)=>(t&&"string"!=typeof t&&(o=t,t=""),`${t=t?`${e}__${t}`:e}${fe(t,o)}`)}function me(e){const t=`van-${e}`;return[t,he(t),pe(t)]}function ge(e,{args:t=[],done:o,canceled:n}){if(e){const i=e.apply(null,t);J(a=i)&&G(a.then)&&G(a.catch)?i.then((e=>{e?o():n&&n()})).catch(P):i?o():n&&n()}else o();var a}function we(e){return e.install=t=>{const{name:o}=e;o&&(t.component(o,e),t.component(le(`-${o}`),e))},e}const ye=Symbol();function be(e){const t=p();t&&O(t.proxy,e)}const[xe,Ce]=me("badge");const ze=we(h({name:xe,props:{dot:Boolean,max:B,tag:Y("div"),color:String,offset:Array,content:B,showZero:L,position:Y("top-right")},setup(e,{slots:t}){const o=()=>{if(t.content)return!0;const{content:o,showZero:n}=e;return _(o)&&""!==o&&(n||0!==o&&"0"!==o)},n=()=>{const{dot:n,max:a,content:i}=e;if(!n&&o())return t.content?t.content():_(a)&&Q(i)&&+i>a?`${a}+`:i},a=v((()=>{const o={background:e.color};if(e.offset){const[n,a]=e.offset;t.default?(o.top=ae(a),o.right="number"==typeof n?ae(-n):n.startsWith("-")?n.replace("-",""):`-${n}`):(o.marginTop=ae(a),o.marginLeft=ae(n))}return o})),i=()=>{if(o()||e.dot)return m("div",{class:Ce([e.position,{dot:e.dot,fixed:!!t.default}]),style:a.value},[n()])};return()=>{if(t.default){const{tag:o}=e;return m(o,{class:Ce("wrapper")},{default:()=>[t.default(),i()]})}return i()}}}));let Se=2e3;const[$e,Ie]=me("config-provider"),Pe=Symbol($e);h({name:$e,props:{tag:Y("div"),zIndex:Number,themeVars:Object,iconPrefix:String},setup(e,{slots:t}){const o=v((()=>{if(e.themeVars)return function(e){const t={};return Object.keys(e).forEach((o=>{var n;t[`--van-${n=o,n.replace(/([A-Z])/g,"-$1").toLowerCase().replace(/^-/,"")}`]=e[o]})),t}(e.themeVars)}));return d(Pe,e),g((()=>{var t;void 0!==e.zIndex&&(t=e.zIndex,Se=t)})),()=>m(e.tag,{class:Ie(),style:o.value},{default:()=>{var e;return[null==(e=t.default)?void 0:e.call(t)]}})}});const[Oe,ke]=me("icon");const Ae=we(h({name:Oe,props:{dot:Boolean,tag:Y("i"),name:String,size:B,badge:B,color:String,badgeProps:Object,classPrefix:String},setup(e,{slots:t}){const o=u(Pe,null),n=v((()=>e.classPrefix||(null==o?void 0:o.iconPrefix)||ke()));return()=>{const{tag:o,dot:a,name:i,size:l,badge:s,color:r}=e,c=(e=>null==e?void 0:e.includes("/"))(i);return m(ze,w({dot:a,tag:o,class:[n.value,c?"":`${n.value}-${i}`],style:{color:r,fontSize:ae(l)},content:s},e.badgeProps),{default:()=>{var e;return[null==(e=t.default)?void 0:e.call(t),c&&m("img",{class:ke("image"),src:i},null)]}})}}})),[Be,Le]=me("loading"),Ee=Array(12).fill(null).map(((e,t)=>m("i",{class:Le("line",String(t+1))},null))),Te=m("svg",{class:Le("circular"),viewBox:"25 25 50 50"},[m("circle",{cx:"50",cy:"50",r:"20",fill:"none"},null)]);const Ye=we(h({name:Be,props:{size:B,type:Y("circular"),color:String,vertical:Boolean,textSize:B,textColor:String},setup(e,{slots:t}){const o=v((()=>O({color:e.color},function(e){if(_(e)){if(Array.isArray(e))return{width:ae(e[0]),height:ae(e[1])};const t=ae(e);return{width:t,height:t}}}(e.size)))),n=()=>{var o;if(t.default)return m("span",{class:Le("text"),style:{fontSize:ae(e.textSize),color:null!=(o=e.textColor)?o:e.color}},[t.default()])};return()=>{const{type:t,vertical:a}=e;return m("div",{class:Le([t,{vertical:a}]),"aria-live":"polite","aria-busy":!0},[m("span",{class:Le("spinner",t),style:o.value},["spinner"===t?Ee:Te]),n()])}}})),Xe={show:Boolean,zIndex:B,overlay:L,duration:B,teleport:[String,Object],lockScroll:L,lazyRender:L,beforeClose:Function,overlayStyle:Object,overlayClass:null,transitionAppear:Boolean,closeOnClickOverlay:L};function Re(){const e=t(0),o=t(0),n=t(0),a=t(0),i=t(0),l=t(0),s=t(""),r=()=>{n.value=0,a.value=0,i.value=0,l.value=0,s.value=""};return{move:t=>{const r=t.touches[0];n.value=(r.clientX<0?0:r.clientX)-e.value,a.value=r.clientY-o.value,i.value=Math.abs(n.value),l.value=Math.abs(a.value);var c,u;(!s.value||i.value<10&&l.value<10)&&(s.value=(c=i.value,u=l.value,c>u?"horizontal":u>c?"vertical":""))},start:t=>{r(),e.value=t.touches[0].clientX,o.value=t.touches[0].clientY},reset:r,startX:e,startY:o,deltaX:n,deltaY:a,offsetX:i,offsetY:l,direction:s,isVertical:()=>"vertical"===s.value,isHorizontal:()=>"horizontal"===s.value}}let je=0;function He(e,t){const o=Re(),a=t=>{o.move(t);const n=o.deltaY.value>0?"10":"01",a=function(e,t=U){let o=e;for(;o&&o!==t&&K(o);){const{overflowY:e}=window.getComputedStyle(o);if(q.test(e))return o;o=o.parentNode}return t}(t.target,e.value),{scrollHeight:i,offsetHeight:l,scrollTop:s}=a;let r="11";0===s?r=l>=i?"00":"01":s+l>=i&&(r="10"),"11"===r||!o.isVertical()||parseInt(r,2)&parseInt(n,2)||ee(t,!0)},l=()=>{document.addEventListener("touchstart",o.start),document.addEventListener("touchmove",a,{passive:!1}),je||document.body.classList.add("van-overflow-hidden"),je++},s=()=>{je&&(document.removeEventListener("touchstart",o.start),document.removeEventListener("touchmove",a),je--,je||document.body.classList.remove("van-overflow-hidden"))},r=()=>t()&&s();W((()=>t()&&l())),n(r),y(r),i(t,(e=>{e?l():s()}))}function Ze(e){const o=t(!1);return i(e,(e=>{e&&(o.value=e)}),{immediate:!0}),e=>()=>o.value?e():null}const[De,Me]=me("overlay");const Ne=we(h({name:De,props:{show:Boolean,zIndex:B,duration:B,className:null,lockScroll:L,lazyRender:L,customStyle:Object},setup(e,{slots:o}){const n=t(),a=Ze((()=>e.show||!e.lazyRender))((()=>{var t;const a=O(function(e){const t={};return void 0!==e&&(t.zIndex=+e),t}(e.zIndex),e.customStyle);return _(e.duration)&&(a.animationDuration=`${e.duration}s`),x(m("div",{ref:n,style:a,class:[Me(),e.className]},[null==(t=o.default)?void 0:t.call(o)]),[[C,e.show]])}));return F("touchmove",(t=>{e.lockScroll&&ee(t,!0)}),{target:n}),()=>m(b,{name:"van-fade",appear:!0},{default:a})}})),We=O({},Xe,{round:Boolean,position:Y("center"),closeIcon:Y("cross"),closeable:Boolean,transition:String,iconPrefix:String,closeOnPopstate:Boolean,closeIconPosition:Y("top-right"),safeAreaInsetTop:Boolean,safeAreaInsetBottom:Boolean}),[Fe,Ve]=me("popup");const qe=we(h({name:Fe,inheritAttrs:!1,props:We,emits:["open","close","opened","closed","keydown","update:show","click-overlay","click-close-icon"],setup(e,{emit:o,attrs:a,slots:l}){let u,p;const f=t(),h=t(),g=Ze((()=>e.show||!e.lazyRender)),y=v((()=>{const t={zIndex:f.value};if(_(e.duration)){t["center"===e.position?"animationDuration":"transitionDuration"]=`${e.duration}s`}return t})),$=()=>{u||(u=!0,f.value=void 0!==e.zIndex?+e.zIndex:++Se,o("open"))},I=()=>{u&&ge(e.beforeClose,{done(){u=!1,o("close"),o("update:show",!1)}})},P=t=>{o("click-overlay",t),e.closeOnClickOverlay&&I()},O=()=>{if(e.overlay)return m(Ne,{show:e.show,class:e.overlayClass,zIndex:f.value,duration:e.duration,customStyle:e.overlayStyle,role:e.closeOnClickOverlay?"button":void 0,tabindex:e.closeOnClickOverlay?0:void 0,onClick:P},{default:l["overlay-content"]})},k=e=>{o("click-close-icon",e),I()},A=()=>{if(e.closeable)return m(Ae,{role:"button",tabindex:0,name:e.closeIcon,class:[Ve("close-icon",e.closeIconPosition),"van-haptics-feedback"],classPrefix:e.iconPrefix,onClick:k},null)},B=()=>o("opened"),L=()=>o("closed"),E=e=>o("keydown",e),T=g((()=>{var t;const{round:o,position:n,safeAreaInsetTop:i,safeAreaInsetBottom:s}=e;return x(m("div",w({ref:h,style:y.value,role:"dialog",tabindex:0,class:[Ve({round:o,[n]:n}),{"van-safe-area-top":i,"van-safe-area-bottom":s}],onKeydown:E},a),[null==(t=l.default)?void 0:t.call(l),A()]),[[C,e.show]])})),Y=()=>{const{position:t,transition:o,transitionAppear:n}=e;return m(b,{name:o||("center"===t?"van-fade":`van-popup-slide-${t}`),appear:n,onAfterEnter:B,onAfterLeave:L},{default:T})};return i((()=>e.show),(e=>{e&&!u&&($(),0===a.tabindex&&r((()=>{var e;null==(e=h.value)||e.focus()}))),!e&&u&&(u=!1,o("close"))})),be({popupRef:h}),He(h,(()=>e.show&&e.lockScroll)),F("popstate",(()=>{e.closeOnPopstate&&(I(),p=!1)})),s((()=>{e.show&&$()})),c((()=>{p&&(o("update:show",!0),p=!1)})),n((()=>{e.show&&e.teleport&&(I(),p=!0)})),d(ye,(()=>e.show)),()=>e.teleport?m(z,{to:e.teleport},{default:()=>[O(),Y()]}):m(S,null,[O(),Y()])}}));const[Ue,Ke]=me("image");const _e=we(h({name:Ue,props:{src:String,alt:String,fit:String,position:String,round:Boolean,width:B,height:B,radius:B,lazyLoad:Boolean,iconSize:B,showError:L,errorIcon:Y("photo-fail"),iconPrefix:String,showLoading:L,loadingIcon:Y("photo")},emits:["load","error"],setup(e,{emit:o,slots:n}){const a=t(!1),l=t(!0),s=t(),{$Lazyload:c}=p().proxy,u=v((()=>{const t={width:ae(e.width),height:ae(e.height)};return _(e.radius)&&(t.overflow="hidden",t.borderRadius=ae(e.radius)),t}));i((()=>e.src),(()=>{a.value=!1,l.value=!0}));const d=e=>{l.value=!1,o("load",e)},f=e=>{a.value=!0,l.value=!1,o("error",e)},h=(t,o,n)=>n?n():m(Ae,{name:t,size:e.iconSize,class:o,classPrefix:e.iconPrefix},null),g=()=>{if(a.value||!e.src)return;const t={alt:e.alt,class:Ke("img"),style:{objectFit:e.fit,objectPosition:e.position}};return e.lazyLoad?x(m("img",w({ref:s},t),null),[[I("lazy"),e.src]]):m("img",w({src:e.src,onLoad:d,onError:f},t),null)},b=({el:e})=>{const t=()=>{e===s.value&&l.value&&d()};s.value?t():r(t)},C=({el:e})=>{e!==s.value||a.value||f()};return c&&k&&(c.$on("loaded",b),c.$on("error",C),y((()=>{c.$off("loaded",b),c.$off("error",C)}))),()=>{var t;return m("div",{class:Ke({round:e.round}),style:u.value},[g(),l.value&&e.showLoading?m("div",{class:Ke("loading")},[h(e.loadingIcon,Ke("loading-icon"),n.loading)]):a.value&&e.showError?m("div",{class:Ke("error")},[h(e.errorIcon,Ke("error-icon"),n.error)]):void 0,null==(t=n.default)?void 0:t.call(n)])}}})),[Ge,Je]=me("swipe"),Qe={loop:L,width:B,height:B,vertical:Boolean,autoplay:T(0),duration:T(500),touchable:L,lazyRender:Boolean,initialSwipe:T(0),indicatorColor:String,showIndicators:L,stopPropagation:L},et=Symbol(Ge);const tt=we(h({name:Ge,props:Qe,emits:["change"],setup(e,{emit:o,slots:a}){const f=t(),h=t(),g=l({rect:null,width:0,height:0,offset:0,active:0,swiping:!1}),w=Re(),{children:b,linkChildren:x}=function(e){const t=l([]),o=l([]),n=p();return{children:t,linkChildren:a=>{d(e,Object.assign({link:e=>{e.proxy&&(o.push(e),t.push(e.proxy),N(n,t,o))},unlink:e=>{const n=o.indexOf(e);t.splice(n,1),o.splice(n,1)},children:t,internalChildren:o},a))}}}(et),C=v((()=>b.length)),z=v((()=>g[e.vertical?"height":"width"])),S=v((()=>e.vertical?w.deltaY.value:w.deltaX.value)),$=v((()=>{if(g.rect){return(e.vertical?g.rect.height:g.rect.width)-z.value*C.value}return 0})),I=v((()=>Math.ceil(Math.abs($.value)/z.value))),P=v((()=>C.value*z.value)),O=v((()=>(g.active+C.value)%C.value)),k=v((()=>{const t=e.vertical?"vertical":"horizontal";return w.direction.value===t})),A=v((()=>{const t={transitionDuration:`${g.swiping?0:e.duration}ms`,transform:`translate${e.vertical?"Y":"X"}(${g.offset}px)`};if(z.value){const o=e.vertical?"height":"width",n=e.vertical?"width":"height";t[o]=`${P.value}px`,t[n]=e[n]?`${e[n]}px`:""}return t})),B=(t,o=0)=>{let n=t*z.value;e.loop||(n=Math.min(n,-$.value));let a=o-n;return e.loop||(a=se(a,$.value,0)),a},L=({pace:t=0,offset:n=0,emitChange:a})=>{if(C.value<=1)return;const{active:i}=g,l=(t=>{const{active:o}=g;return t?e.loop?se(o+t,-1,C.value):se(o+t,0,I.value):o})(t),s=B(l,n);if(e.loop){if(b[0]&&s!==$.value){const e=s<$.value;b[0].setOffset(e?P.value:0)}if(b[C.value-1]&&0!==s){const e=s>0;b[C.value-1].setOffset(e?-P.value:0)}}g.active=l,g.offset=s,a&&l!==i&&o("change",O.value)},E=()=>{g.swiping=!0,g.active<=-1?L({pace:C.value}):g.active>=C.value&&L({pace:-C.value})},T=()=>{E(),w.reset(),j((()=>{g.swiping=!1,L({pace:1,emitChange:!0})}))};let Y;const R=()=>clearTimeout(Y),H=()=>{R(),e.autoplay>0&&C.value>1&&(Y=setTimeout((()=>{T(),H()}),+e.autoplay))},Z=(t=+e.initialSwipe)=>{if(!f.value)return;const o=()=>{var o,n;if(!te(f)){const t={width:f.value.offsetWidth,height:f.value.offsetHeight};g.rect=t,g.width=+(null!=(o=e.width)?o:t.width),g.height=+(null!=(n=e.height)?n:t.height)}C.value&&(t=Math.min(C.value-1,t)),g.active=t,g.swiping=!0,g.offset=B(t),b.forEach((e=>{e.setOffset(0)})),H()};te(f)?r().then(o):o()},D=()=>Z(g.active);let M;const W=t=>{e.touchable&&(w.start(t),M=Date.now(),R(),E())},q=()=>{if(!e.touchable||!g.swiping)return;const t=Date.now()-M,o=S.value/t;if((Math.abs(o)>.25||Math.abs(S.value)>z.value/2)&&k.value){const t=e.vertical?w.offsetY.value:w.offsetX.value;let o=0;o=e.loop?t>0?S.value>0?-1:1:0:-Math[S.value>0?"ceil":"floor"](S.value/z.value),L({pace:o,emitChange:!0})}else S.value&&L({pace:0});g.swiping=!1,H()},U=(t,o)=>{const n=o===O.value,a=n?{backgroundColor:e.indicatorColor}:void 0;return m("i",{style:a,class:Je("indicator",{active:n})},null)};return be({prev:()=>{E(),w.reset(),j((()=>{g.swiping=!1,L({pace:-1,emitChange:!0})}))},next:T,state:g,resize:D,swipeTo:(t,o={})=>{E(),w.reset(),j((()=>{let n;n=e.loop&&t===C.value?0===g.active?0:t:t%C.value,o.immediate?j((()=>{g.swiping=!1})):g.swiping=!1,L({pace:n-g.active,emitChange:!0})}))}}),x({size:z,props:e,count:C,activeIndicator:O}),i((()=>e.initialSwipe),(e=>Z(+e))),i(C,(()=>Z(g.active))),i((()=>e.autoplay),H),i([oe,ne],D),i(function(){if(!V&&(V=t("visible"),X)){const e=()=>{V.value=document.hidden?"hidden":"visible"};e(),window.addEventListener("visibilitychange",e)}return V}(),(e=>{"visible"===e?H():R()})),s(Z),c((()=>Z(g.active))),function(e){const t=u(ye,null);t&&i(t,(t=>{t&&e()}))}((()=>Z(g.active))),n(R),y(R),F("touchmove",(t=>{if(e.touchable&&g.swiping&&(w.move(t),k.value)){!e.loop&&(0===g.active&&S.value>0||g.active===C.value-1&&S.value<0)||(ee(t,e.stopPropagation),L({offset:S.value}))}}),{target:h}),()=>{var t;return m("div",{ref:f,class:Je()},[m("div",{ref:h,style:A.value,class:Je("track",{vertical:e.vertical}),onTouchstartPassive:W,onTouchend:q,onTouchcancel:q},[null==(t=a.default)?void 0:t.call(a)]),a.indicator?a.indicator({active:O.value,total:C.value}):e.showIndicators&&C.value>1?m("div",{class:Je("indicators",{vertical:e.vertical})},[Array(C.value).fill("").map(U)]):void 0])}}})),[ot,nt]=me("swipe-item");const at=we(h({name:ot,setup(e,{slots:n}){let a;const i=l({offset:0,inited:!1,mounted:!1}),{parent:c,index:d}=function(e){const n=u(e,null);if(n){const e=p(),{link:t,unlink:a,internalChildren:i}=n;return t(e),o((()=>a(e))),{parent:n,index:v((()=>i.indexOf(e)))}}return{parent:null,index:t(-1)}}(et);if(!c)return;const f=v((()=>{const e={},{vertical:t}=c.props;return c.size.value&&(e[t?"height":"width"]=`${c.size.value}px`),i.offset&&(e.transform=`translate${t?"Y":"X"}(${i.offset}px)`),e})),h=v((()=>{const{loop:e,lazyRender:t}=c.props;if(!t||a)return!0;if(!i.mounted)return!1;const o=c.activeIndicator.value,n=c.count.value-1,l=0===o&&e?n:o-1,s=o===n&&e?0:o+1;return a=d.value===o||d.value===l||d.value===s,a}));return s((()=>{r((()=>{i.mounted=!0}))})),be({setOffset:e=>{i.offset=e}}),()=>{var e;return m("div",{class:nt(),style:f.value},[h.value?null==(e=n.default)?void 0:e.call(n):null])}}})),it=e=>Math.sqrt((e[0].clientX-e[1].clientX)**2+(e[0].clientY-e[1].clientY)**2),lt=me("image-preview")[1];var st=h({props:{src:String,show:Boolean,active:Number,minZoom:E(B),maxZoom:E(B),rootWidth:E(Number),rootHeight:E(Number)},emits:["scale","close"],setup(e,{emit:o}){const n=l({scale:1,moveX:0,moveY:0,moving:!1,zooming:!1,imageRatio:0,displayWidth:0,displayHeight:0}),a=Re(),s=t(),r=v((()=>{const{rootWidth:t,rootHeight:o}=e,a=o/t;return n.imageRatio>a})),c=v((()=>{const{scale:e,moveX:t,moveY:o,moving:a,zooming:i}=n,l={transitionDuration:i||a?"0s":".3s"};if(1!==e){const n=t/e,a=o/e;l.transform=`scale(${e}, ${e}) translate(${n}px, ${a}px)`}return l})),u=v((()=>{if(n.imageRatio){const{rootWidth:t,rootHeight:o}=e,a=r.value?o/n.imageRatio:t;return Math.max(0,(n.scale*a-t)/2)}return 0})),d=v((()=>{if(n.imageRatio){const{rootWidth:t,rootHeight:o}=e,a=r.value?o:t*n.imageRatio;return Math.max(0,(n.scale*a-o)/2)}return 0})),p=t=>{(t=se(t,+e.minZoom,+e.maxZoom+1))!==n.scale&&(n.scale=t,o("scale",{scale:t,index:e.active}))},f=()=>{p(1),n.moveX=0,n.moveY=0};let h,g,w,y,b,x,C;const z=e=>{const{touches:t}=e,{offsetX:o}=a;a.start(e),h=t.length,g=n.moveX,w=n.moveY,C=Date.now(),n.moving=1===h&&1!==n.scale,n.zooming=2===h&&!o.value,n.zooming&&(y=n.scale,b=it(e.touches))},S=()=>{if(h>1)return;const{offsetX:e,offsetY:t}=a,i=Date.now()-C;e.value<5&&t.value<5&&i<250&&(x?(clearTimeout(x),x=null,(()=>{const e=n.scale>1?1:2;p(e),n.moveX=0,n.moveY=0})()):x=setTimeout((()=>{o("close"),x=null}),250))},$=t=>{let o=!1;(n.moving||n.zooming)&&(o=!0,n.moving&&g===n.moveX&&w===n.moveY&&(o=!1),t.touches.length||(n.zooming&&(n.moveX=se(n.moveX,-u.value,u.value),n.moveY=se(n.moveY,-d.value,d.value),n.zooming=!1),n.moving=!1,g=0,w=0,y=1,n.scale<1&&f(),n.scale>e.maxZoom&&(n.scale=+e.maxZoom))),ee(t,o),S(),a.reset()},I=e=>{const{naturalWidth:t,naturalHeight:o}=e.target;n.imageRatio=o/t};return i((()=>e.active),f),i((()=>e.show),(e=>{e||f()})),F("touchmove",(e=>{const{touches:t}=e;if(a.move(e),(n.moving||n.zooming)&&ee(e,!0),n.moving){const{deltaX:e,deltaY:t}=a,o=e.value+g,i=t.value+w;n.moveX=se(o,-u.value,u.value),n.moveY=se(i,-d.value,d.value)}if(n.zooming&&2===t.length){const e=it(t);p(y*e/b)}}),{target:v((()=>{var e;return null==(e=s.value)?void 0:e.$el}))}),()=>{const t={loading:()=>m(Ye,{type:"spinner"},null)};return m(at,{ref:s,class:lt("swipe-item"),onTouchstartPassive:z,onTouchend:$,onTouchcancel:$},{default:()=>[m(_e,{src:e.src,fit:"contain",class:lt("image",{vertical:r.value}),style:c.value,onLoad:I},t)]})}}});const[rt,ct]=me("image-preview"),ut=["show","transition","overlayStyle","closeOnPopstate"];var vt=h({name:rt,props:{show:Boolean,loop:L,images:{type:Array,default:()=>[]},minZoom:T(1/3),maxZoom:T(3),overlay:L,closeable:Boolean,showIndex:L,className:null,closeIcon:Y("clear"),transition:String,beforeClose:Function,overlayClass:null,overlayStyle:Object,swipeDuration:T(300),startPosition:T(0),showIndicators:Boolean,closeOnPopstate:L,closeIconPosition:Y("top-right")},emits:["scale","close","closed","change","update:show"],setup(e,{emit:o,slots:n}){const a=t(),c=l({active:0,rootWidth:0,rootHeight:0}),u=()=>{if(a.value){const e=M(a.value.$el);c.rootWidth=e.width,c.rootHeight=e.height,a.value.resize()}},v=e=>o("scale",e),d=e=>o("update:show",e),p=()=>{ge(e.beforeClose,{args:[c.active],done:()=>d(!1)})},f=e=>{e!==c.active&&(c.active=e,o("change",e))},h=()=>{if(e.showIndex)return m("div",{class:ct("index")},[n.index?n.index({index:c.active}):`${c.active+1} / ${e.images.length}`])},g=()=>{if(n.cover)return m("div",{class:ct("cover")},[n.cover()])},y=()=>{if(e.closeable)return m(Ae,{role:"button",name:e.closeIcon,class:[ct("close-icon",e.closeIconPosition),"van-haptics-feedback"],onClick:p},null)},b=()=>o("closed"),x=(e,t)=>{var o;return null==(o=a.value)?void 0:o.swipeTo(e,t)};return be({swipeTo:x}),s(u),i([oe,ne],u),i((()=>e.startPosition),(e=>f(+e))),i((()=>e.show),(t=>{const{images:n,startPosition:a}=e;t?(f(+a),r((()=>{u(),x(+a,{immediate:!0})}))):o("close",{index:c.active,url:n[c.active]})})),()=>{return m(qe,w({class:[ct(),e.className],overlayClass:[ct("overlay"),e.overlayClass],onClosed:b,"onUpdate:show":d},(t=e,ut.reduce(((e,n)=>(o&&void 0===t[n]||(e[n]=t[n]),e)),{}))),{default:()=>[y(),m(tt,{ref:a,lazyRender:!0,loop:e.loop,class:ct("swipe"),duration:e.swipeDuration,initialSwipe:e.startPosition,showIndicators:e.showIndicators,indicatorColor:"white",onChange:f},{default:()=>[e.images.map((t=>m(st,{src:t,show:e.show,active:c.active,maxZoom:e.maxZoom,minZoom:e.minZoom,rootWidth:c.rootWidth,rootHeight:c.rootHeight,onScale:v,onClose:p},null)))]}),h(),g()]});var t,o}}});let dt;const pt={loop:!0,images:[],maxZoom:3,minZoom:1/3,onScale:void 0,onClose:void 0,onChange:void 0,teleport:"body",className:"",showIndex:!0,closeable:!1,closeIcon:"clear",transition:void 0,beforeClose:void 0,overlayStyle:void 0,overlayClass:void 0,startPosition:0,swipeDuration:300,showIndicators:!1,closeOnPopstate:!0,closeIconPosition:"top-right"};function ft(){({instance:dt}=function(e){const t=$(e),o=document.createElement("div");return document.body.appendChild(o),{instance:t.mount(o),unmount(){t.unmount(),document.body.removeChild(o)}}}({setup(){const{state:e,toggle:t}=function(){const e=l({show:!1}),t=t=>{e.show=t},o=o=>{O(e,o,{transitionAppear:!0}),t(!0)},n=()=>t(!1);return be({open:o,close:n,toggle:t}),{open:o,close:n,state:e,toggle:t}}(),o=()=>{e.images=[]};return()=>m(vt,w(e,{onClosed:o,"onUpdate:show":t}),null)}}))}const ht=(e,t=0)=>{if(k)return dt||ft(),e=Array.isArray(e)?{images:e,startPosition:t}:e,dt.open(O({},pt,e)),dt};ht.Component=we(vt),ht.install=e=>{e.use(ht.Component)};export{ht as I};
